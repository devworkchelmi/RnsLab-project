{% extends "@EasyAdmin/page/content.html.twig" %}
{% block content %}
    <div class="container-fluid">
        <div class="row mb-4">
            <div class="col-md-12 d-flex justify-content-between align-items-center">
                <h1>Dashboard</h1>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-md-12">
                <h3>Les 5 derniers messages</h3>
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Date d'envoi</th>
                            <th>Civilité</th>
                            <th>Nom</th>
                            <th>Prénom</th>
                            <th>Statut</th>
                            <th>Objet du message</th>
                            <th>Téléphone</th>
                            <th>Email</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% set latestMessages = app.request.attributes.get('latestMessages', []) %}
                        {% for message in latestMessages %}
                            <tr>
                                <td>{{ message.dateSend|date('d/m/Y') }}</td>
                                <td>{{ message.civility }}</td>
                                <td>{{ message.lastname }}</td>
                                <td>{{ message.firstname }}</td>
                                <td>{{ message.occupation }}</td>
                                <td>{{ message.requestObject }}</td>
                                <td>{{ message.telNumber }}</td>
                                <td>{{ message.email }}</td>
                            </tr>
                        {% else %}
                            <tr>
                                <td colspan="9">Aucun message trouvé.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-md-12">
                <h3>Les 5 derniers inscrits à la newsletter</h3>
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Date de souscription</th>
                            <th>Email</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% set latestSuscribers = app.request.attributes.get('latestSuscribers', []) %}
                        {% for suscriber in latestSuscribers %}
                            <tr>
                                <td>{{ suscriber.dateSuscription|date('d/m/Y') }}</td>
                                <td>{{ suscriber.email }}</td>
                            </tr>
                        {% else %}
                            <tr>
                                <td colspan="2">Aucun abonné trouvé.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col-md-12">
                <h3>Les 5 derniers produits ajoutés</h3>
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Marque</th>
                            <th>Star</th>
                            <th>Image</th>
                            <th>Titre</th>
                            <th>Description</th>
                            <th>Ordre</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% set latestProducts = app.request.attributes.get('latestProducts', []) %}
                        {% for product in latestProducts %}
                            <tr>
                                <td>{{ product.label }}</td>
                                <td>{{ product.hightlighted }}</td>
                                <td>{{ product.pictureSrc }}</td>
                                <td>{{ product.title }}</td>
                                <td>{{ product.description }}</td>
                                <td>{{ product.orderProduct }}</td>
                            </tr>
                        {% else %}
                            <tr>
                                <td colspan="6">Aucun produit ajouté.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
                <div class="row mb-4">
            <div class="col-md-12">
                <h3>Les 5 derniers articles</h3>
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Date de publication</th>
                            <th>Star</th>
                            <th>Image</th>
                            <th>Titre</th>
                            <th>Méta-Description</th>
                            <th>Ordre</th>
                            <th>Auteur</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% set latestArticles = app.request.attributes.get('latestArticles', []) %}
                        {% for article in latestArticles %}
                            <tr>
                                <td>{{ article.datePublication|date('d/m/Y') }}</td>
                                <td>{{ article.hightlighted }}</td>
                                <td> 
                                    <img 
                                        src="{{ article.pictureSrc }}" 
                                        alt="ceci est un article backoffice" 
                                        class="img-fluid"
                                    >
                                </td>
                                <td>{{ article.title }}</td>
                                <td>{{ article.metaDescription }}</td>
                                <td>{{ article.orderArticle }}</td>
                                <td>{{ article.autor }}</td>
                            </tr>
                        {% else %}
                            <tr>
                                <td colspan="2">Aucun article publié.</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}